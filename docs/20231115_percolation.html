<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Percolation - 15/11/2023</title>
  <meta name="description" content="Presentation for OSX">
  <meta name="author" content="Anne L'H√¥te">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="dist/reset.css">
  <link rel="stylesheet" href="dist/reveal.css">
  <link rel="stylesheet" href="dist/theme/white.css" id="theme">
  <!-- Theme used for syntax highlighting of code -->
  <link rel="stylesheet" href="plugin/highlight/monokai.css">
  <style>
    :root {
      --r-link-color: rgba(0, 0, 145, 0.75);
    }

    .col {
      flex: 1;
    }

    .container {
      display: flex;
    }

    .reveal .slide-number {
      background-color: rgba(0, 0, 145, 0.75);
      left: 8px;
      right: auto;
    }

    .twocolumn {
      display: grid;
      grid-template-columns: 1fr 1fr;
      grid-gap: 10px;
      text-align: left;
    }

    .tag {
      border-radius: 15px;
      padding: 5px;
    }

    .criterion {
      background-color: #c9e3fc;
    }

    .strategy {
      background-color: #a0cffb;
    }

    .strategy_family {
      background-color: #7abafa;
    }

    .strategies {
      background-color: #4da6f8;
    }
  </style>
</head>

<body>
  <div class="reveal">
    <!-- Any section element inside of this container is displayed as a slide -->
    <div class="slides">
      <section>
        <div style="float:left;">
          <img src="images/mesr.svg" alt="mesr logo"
            style="height:180px; margin:0 auto 0rem 1em; background:transparent;" class="mesr-logo">
        </div>
        <div style="float:left; display:block; margin:auto">
          <div style="font-size:1.2em">La percolation avec Elasticsearch pour aligner un r√©f√©rentiel</div>
        </div>
        <div style="float:right; margin-top:2rem;">
          <p style="font-size:0.6em; margin-top:0; margin-bottom:0.5rem;">
            Anne L'H√¥te
          </p>
          <p style="font-size:0.6em; margin-top:0; margin-bottom:0.2rem;">
            D√©partement des outils d'aide
          </p>
          <p style="font-size:0.6em; margin-top:0; margin-bottom:0.5rem;">
            √† la d√©cision - SIES - MESR
          </p>
          <img src="images/CC0.jpeg" alt="licence" style="width: 100px;">
        </div>
      </section>

      <section>

        <section>
          <h2>Publication scientifique</h2>
          <img src="images/percolation_scientific_publication_1.png" alt="publication scientifique"
            style="width:80%; border: 1px black solid;">
        </section>

        <section>
          <h2>Publication scientifique</h2>
          <div class="twocolumn">
            <div style="width: 200%;">
              <img src="images/percolation_scientific_publication_2.png" alt="publication scientifique"
                style="border: 1px black solid;">
            </div>
            <div style="padding-left: 100%; font-size: 30px;">
              <ul>
                <li>Titre</li>
                <li>Auteur(s)</li>
                <li><b>Affiliation(s)</b></li>
                <li>Date de publication</li>
                <li>R√©sum√©</li>
                <li>Mots-cl√©s</li>
                <li>...</li>
              </ul>
            </div>
          </div>
        </section>

        <section>
          <h2 style="position: relative; z-index: 1;">Publication scientifique</h2>
          <div class="twocolumn">
            <div>
              <img class="fragment" src="images/percolation_affiliation_1.png" alt="affiliation"
                style="transform: rotate(-30deg); width: 75%;">
              <img class="fragment" src="images/percolation_affiliation_2.png" alt="affiliation"
                style="margin-top: -50px; width: 100%;">
            </div>
            <div>
              <img class="fragment" src="images/percolation_affiliation_4.png" alt="affiliation"
                style="margin-left: -100px; width: 150%;">
              <img class="fragment" src="images/percolation_affiliation_5.png" alt="affiliation"
                style="margin-left: -50px; margin-top: -100px; transform: rotate(30deg); width: 100%;">
            </div>
          </div>
        </section>

        <section>
          <h2>Publication scientifique</h2>
          <div>
            <div>Les limites ‚õî</div>
            <ul>
              <li>Champ texte libre (<em>Centre Nationale de la Recherche Scientifique</em>)</li>
              <li>Multilinguisme (<em>French National Centre for Scientific Research</em>)</li>
              <li>Acronyme, alias (<em>CNRS</em>)</li>
              <li>Evolution du paysage de l'ESR (fusion, fermeture, renommage)</li>
            </ul>
          </div>
        </section>
      </section>

      <section>
        <section>
          <h2>Un r√©f√©rentiel : Research Organization Registry (ROR)</h2>
          <ul>
            <li>Structures de recherche</li>
            <li>International</li>
            <li>R√©cent (2019)</li>
            <li>Open data (CC0)</li>
            <li>Plus de 100 000 structures</li>
          </ul>
        </section>

        <section>
          <h2>Un r√©f√©rentiel (ROR)</h2>
          <div>
            <div>Site web</div>
            <a href="https://ror.org/02feahw73" target="_blank">
              <img src="images/percolation_ror.png" alt="RoR">
            </a>
          </div>
        </section>

        <section>
          <h2>Un r√©f√©rentiel (ROR)</h2>
          <div>
            <div>API</div>
            <a href="https://api.dev.ror.org/v2/organizations/02feahw73" target="_blank">
              <img src="images/percolation_ror_api.png" alt="RoR">
            </a>
          </div>
        </section>

        <section>
          <h2>Un r√©f√©rentiel (ROR)</h2>
          <div>
            <div>Data dump</div>
            <a href="https://zenodo.org/records/10086202" target="_blank">
              <img src="images/percolation_ror_data_dump.png" alt="RoR data dump">
            </a>
          </div>
        </section>
      </section>

      <section>
        <section>
          <h2>Et maintenant ?</h2>
          <div>Comment faire le lien entre un texte libre et un r√©f√©rentiel ?</div>
          <div>ü§ù</div>
        </section>

        <section>
          <h2>Et maintenant ?</h2>
          <div>L'IA ?</div>
          <div>Boite noire donc difficile de comprendre la raison des erreurs</div>
        </section>
      </section>

      <section>
        <section>
          <div>
            <h2>Elasticsearch !</h2>
            <div>Et son percolate query</div>
            <div>üéâ</div>
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <blockquote>
            &ldquo;The percolate query can be used to match queries stored in an index. The percolate query
            itself contains the document that will be used as query to match with the stored queries.&ldquo;
          </blockquote>
          <div>selon la <a
              href="https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl-percolate-query.html"
              target="_blank">documentation</a></div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div style="font-size: 35px;">
            <div>Liste des m√©tadonn√©es disponibles dans RoR</div>
            <ul>
              <li>ror_acronym</li>
              <li>ror_city</li>
              <li>ror_country</li>
              <li>ror_country_code</li>
              <li>ror_id</li>
              <li>ror_name</li>
              <li>ror_supervisor_name</li>
              <li>ror_web_url</li>
              <li>...</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>Construction des index ES li√©s</div>
            <img src="images/percolation_elasticsearch_indices.png" alt="elasticsearch indices" style="width: 100%;">
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>Indexation des donn√©es</div>
            <img src="images/percolation_elasticsearch_response.png" alt="elasticsearch indices" style="width: 100%;">
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>Requ√™te ES pour un crit√®re donn√© (city)</div>
            <span><em>https://cluster.elasticsearch/ror_city/_search</em></span>
            <pre style="font-size: 15px;">
                <code>{
    "query": {
        "percolate": {
            "field": "query",
            "document": {
                "content": "cnrs paris france"
            }
        }
    },
    "_source": {
        "includes": [
            "rors"
        ]
    },
    "highlight": {
        "fields": {
            "content": {
                "type": "unified"
            }
        }
    }
  }</code>
              </pre>
          </div>
        </section>
        
        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>La r√©ponse √† la question</div>
            <img src="images/percolation_elasticsearch_search.png" alt="elasticsearch indices" style="width: 90%; ">
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div style="font-size: 30px;">
            <div style="margin-bottom: 20px;">Mise en place de strat√©gies</div>
            <div style="margin-bottom: 20px;">
              <span class="tag strategy">strat√©gie</span> : <span class="tag criterion">crit√®re_01</span> AND <span
                class="tag criterion">crit√®re_02</span> AND <span class="tag criterion">crit√®re_03</span>
            </div>
            <div style="margin-bottom: 20px;">
              <span class="tag strategy_family">famille de strat√©gies</span> : <span
                class="tag strategy">strat√©gie_01</span> OR <span class="tag strategy">strat√©gie_02</span> OR <span
                class="tag strategy">strat√©gie_03</span>
            </div>
            <div style="margin-bottom: 20px;">
              <span class="tag strategies">strat√©gies</span> : <span
                class="tag strategy_family">famille_de_strat√©gies_01</span> THEN <span
                class="tag strategy_family">famille_de_strat√©gies_02</span>
            </div>
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>Les strat√©gies par d√©faut pour RoR</div>
            <a href="https://github.com/dataesr/affiliation-matcher/blob/master/project/server/main/match_ror.py#L5-L38" target="_blank">
              <pre style="font-size: 20px;">
                <code>DEFAULT_STRATEGIES = [
  [['ror_id']],
  [['ror_grid_id']],
  [['ror_name', 'ror_supervisor_name', 'ror_acronym',
      'ror_city_nuts_level2', 'ror_country'],
    ['ror_name', 'ror_supervisor_name', 'ror_acronym',
      'ror_city_zone_emploi', 'ror_country']
  ],
  [['ror_name', 'ror_acronym', 'ror_city', 'ror_country'],
    ['ror_name', 'ror_acronym', 'ror_city_zone_emploi',
      'ror_country']
  ],
  [['ror_name', 'ror_country', 'ror_web_url']],
  ...
]</code>
              </pre>
            </a>
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <a href="https://affiliation-matcher.staging.dataesr.ovh/" target="_blank">
            <img src="images/percolation_elasticsearch_ui.png" alt="elasticsearch indices" style="width: 90%; border: 1px black solid;">
          </a>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>S'applique √† d'autres r√©f√©rentiels</div>
            <ul>
              <li>country (bas√© sur pycountry)</li>
              <li>Grid.ac (obsol√®te)</li>
              <li>RNSR</li>
              <li>...</li>
            </ul>
          </div>
        </section>

        <section>
          <h2>Elasticsearch</h2>
          <div>
            <div>R√©sultats üìà</div>
            <table>
              <thead>
                <tr>
                  <th>matcher</th>
                  <th>precision</th>
                  <th>recall</th>
                </tr>
              </thead>
              <tbody>
                <tr>
                  <td>country</td>
                  <td>0.9953</td>
                  <td>0.9690</td>
                </tr>
                <tr>
                  <td>grid</td>
                  <td>0.7946</td>
                  <td>0.5944</td>
                </tr>
                <tr>
                  <td>rnsr</td>
                  <td>0.9654</td>
                  <td>0.8192</td>
                </tr>
                <tr>
                  <td>ror</td>
                  <td>0.8891</td>
                  <td>0.2356</td>
                </tr>
              </tbody>
            </table>
          </div>
        </section>

        <section data-background="http://i.giphy.com/uLYTKQE2cftpLFMpEG.gif">
        </section>
      </section>

      <section>
        <section>
          <h2>Ressources</h2>
          <ul>
            <li>üêô <a href="https://github.com/dataesr/affiliation-matcher" target="_blank">Code (Github)</a></li>
            <li>üêã <a href="https://github.com/dataesr/affiliation-matcher/pkgs/container/affiliation-matcher"
                target="_blank">Image Docker</a></li>
            <li>üñãÔ∏è <a href="https://hal.science/hal-03365806" target="_blank">Publication (preprint)</a></li>
            <li>üîó <a href="https://affiliation-matcher.staging.dataesr.ovh/" target="_blank">Site d√©mo</a></li>
            <li>üëÄ <a href="https://tinyurl.com/4yvjswvs" target="_blank">Pr√©sentation :
                https://tinyurl.com/4yvjswvs</a></li>
          </ul>
        </section>

        <section>
          <div style="margin-bottom: 50px;">‚ùî Des questions ?</div>
          <div>üì® anne.lhote@recherche.gouv.fr</div>
          <div>üì® bso@recherche.gouv.fr</div>
          <div>üê¶ @annelhote</div>
        </section>
      </section>
    </div>
  </div>

  <script src="dist/reveal.js"></script>
  <script src="plugin/zoom/zoom.js"></script>
  <script src="plugin/notes/notes.js"></script>
  <script src="plugin/search/search.js"></script>
  <script src="plugin/markdown/markdown.js"></script>
  <script src="plugin/highlight/highlight.js"></script>
  <script>
    // Also available as an ES module, see:
    // https://revealjs.com/initialization/
    Reveal.initialize({
      center: true,
      controls: true,
      hash: true,
      // Learn about plugins: https://revealjs.com/plugins/
      plugins: [RevealZoom, RevealNotes, RevealSearch, RevealMarkdown, RevealHighlight],
      progress: true,
      slideNumber: 'c/t',
    });
  </script>

</body>

</html>